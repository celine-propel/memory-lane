{% extends "base.html" %}
{% block content %}
<div class="mb-8">
  <h1 class="text-3xl sm:text-4xl font-black text-white tracking-tight leading-tight">Profile</h1>
  <p class="text-indigo-200/60 mt-2 font-medium">Edit your info and manage orientation questions.</p>
</div>

{% if msg %}
<div class="mb-6 p-4 bg-emerald-500/10 border-l-4 border-emerald-500 text-emerald-200 text-xs font-bold rounded-r-xl backdrop-blur-md">
  {{ msg }}
</div>
{% endif %}

<div class="bg-white/5 backdrop-blur-2xl border border-white/10 rounded-[2rem] p-6 shadow-2xl space-y-8">

  <form method="post" action="/profile" class="space-y-4">
    <div class="text-[10px] font-black text-indigo-300 uppercase tracking-[0.2em]">Personal Info</div>

    <div>
      <label class="block text-[10px] font-black text-indigo-300 uppercase tracking-[0.2em] mb-2 ml-1">Full Name</label>
      <input name="name" required value="{{ user.name }}"
        class="w-full px-5 py-3.5 rounded-2xl bg-white/5 border border-white/10 text-white outline-none focus:ring-4 focus:ring-indigo-500/20 shadow-inner">
    </div>

    <div class="grid grid-cols-3 gap-3">
      <div>
        <label class="block text-[10px] font-black text-indigo-300 uppercase tracking-[0.2em] mb-2 ml-1">City</label>
        <input name="city" value="{{ user.city or '' }}"
          class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white outline-none focus:ring-2 focus:ring-indigo-500 shadow-inner">
      </div>
      <div>
        <label class="block text-[10px] font-black text-indigo-300 uppercase tracking-[0.2em] mb-2 ml-1">State/Province</label>
        <input name="state" value="{{ user.state or '' }}"
          class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white outline-none focus:ring-2 focus:ring-indigo-500 shadow-inner">
      </div>
      <div>
        <label class="block text-[10px] font-black text-indigo-300 uppercase tracking-[0.2em] mb-2 ml-1">Country</label>
        <input name="country" value="{{ user.country or '' }}"
          class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white outline-none focus:ring-2 focus:ring-indigo-500 shadow-inner">
      </div>
    </div>

    <button type="submit"
      class="w-full py-3 bg-indigo-500 text-white font-black rounded-2xl shadow-xl hover:bg-indigo-400 transition-all">
      Save Profile
    </button>
  </form>

  <div class="border-t border-white/10 pt-6 space-y-4">
    <div class="text-[10px] font-black text-indigo-300 uppercase tracking-[0.2em]">Orientation Questions</div>

    <form method="post" action="/profile/questions/add" class="space-y-3">
      <input name="prompt" type="text" placeholder="New question (e.g., What is your last name?)"
        class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white outline-none focus:ring-2 focus:ring-indigo-500 shadow-inner">
      <input name="answer" type="text" placeholder="Answer (one word preferred)"
        class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white outline-none focus:ring-2 focus:ring-indigo-500 shadow-inner">
      <button type="submit"
        class="w-full py-3 bg-cyan-500 text-white font-black rounded-2xl shadow-xl hover:bg-cyan-400 transition-all">
        Add Question
      </button>
      <p class="text-xs text-indigo-200/60">Optional. Add as many as you want.</p>
    </form>

    <div class="space-y-2">
      {% for q in questions %}
      <div class="flex items-center justify-between bg-white/5 border border-white/10 rounded-2xl p-4">
        <div class="pr-4">
          <div class="text-sm font-bold text-white">{{ q.prompt }}</div>
        </div>
        <form method="post" action="/profile/questions/{{ q.id }}/delete">
          <button class="px-3 py-2 rounded-xl bg-rose-500/10 text-rose-300 font-bold hover:bg-rose-500/20 transition">
            Delete
          </button>
        </form>
      </div>
      {% else %}
      <div class="text-xs text-indigo-200/60">No questions yet. Add a couple to personalize Orientation.</div>
      {% endfor %}
    </div>
  </div>

</div>
{% endblock %}
